<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Invent치rio Senac</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
<header>
    <div class="container">
        <div class="header-content">
            <h1>Invent치rio de Equipamentos</h1>
            <p class="subtitle">Sistema de gerenciamento e rastreamento de equipamentos</p>
        </div>
    </div>
</header>

<div class="container">
    <div class="search-container">
        <h2 class="search-title">Buscar Equipamento</h2>
        <div class="search-form">
            <input 
                type="text"
                id="search-input" 
                class="search-input" 
                placeholder="Digite o c칩digo do equipamento"
                autocomplete="off"
            >
            <button id="search-button" class="search-button">Buscar</button>
        </div>
    </div>

    <div class="qr-section">
        <h2 class="qr-info">Escaneie o c칩digo de um equipamento</h2>
        <p>Use o leitor de c칩digo de barras para escanear o equipamento para ver suas informa칞칫es detalhadas.</p>
        <img src="/information_barcode.png" alt="Exemplo de C칩digo de barras" class="qr-image">
        <p>Exemplo de C칩digo de barras.</p>
        <p style="font-style: italic;">Ou use o campo de busca acima para pesquisar pelo c칩digo diretamente.</p>
        <h3>Legenda</h3>
        <div class="table_component" role="region" tabindex="0">
            <table>
                <thead>
                    <tr>
                        <th>Tipo de Equipamento</th>
                        <th>C칩digos</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Computador</td>
                        <td>221001 - 221005</td>
                    </tr>
                    <tr>
                        <td>C칙meras</td>
                        <td>221006 - 221007</td>
                    </tr>
                    <tr>
                        <td>NVR</td>
                        <td>221008</td>
                    </tr>
                    <tr>
                        <td>Switch</td>
                        <td>221009 - 221010</td>
                    </tr>
                    <tr>
                        <td>Patch Panel</td>
                        <td>221011 - 221012</td>
                    </tr>
                    <tr>
                        <td>Monitor</td>
                        <td>221013 - 221017</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div id="loading" class="loading" style="display: none;">
        Buscando informa칞칫es do equipamento...
    </div>
    
    <div id="error" class="error" style="display: none;">
        N칚o foi poss칤vel encontrar informa칞칫es para este c칩digo. Por favor, verifique o c칩digo e tente novamente.
    </div>
    
    <div id="computer-info" class="computer-info">
        <div class="computer-header">
            <h2 id="computer-title" class="computer-title">Computador</h2>
            <button id="computer-status" class="status-badge status-active">Ativo</button>
        </div>
        
        <div class="info-grid">
            <div class="info-item">
                <div class="info-label">Nome do dispositivo</div>
                <div id="computer-name" class="info-value">W-INF12-01</div>
            </div>
            <div class="info-item">
                <div class="info-label">Hostname</div>
                <div id="computer-hostname" class="info-value">CJ_W_01</div>
            </div>
            <div class="info-item">
                <div class="info-label">Modelo</div>
                <div id="computer-model" class="info-value">Windows 10 Pro</div>
            </div>
            <div class="info-item">
                <div class="info-label">Respons치vel</div>
                <div id="computer-owner" class="info-value">Diogo Vicente</div>
            </div>
            <div class="info-item">
                <div class="info-label">Endere칞o IP</div>
                <div id="computer-ip" class="info-value">192.168.1.101</div>
            </div>
            <div class="info-item">
                <div class="info-label">Endere칞o MAC</div>
                <div id="computer-mac" class="info-value">00:1A:2B:3C:4D:5E</div>
            </div>
        </div>
        
        <div class="details-section">
            <h3 class="details-title">Detalhamento</h3>
            <div id="computer-details" class="details-content">
                <!-- Processador: AMD Ryzen Threadripper 7980X
                Mem칩ria RAM: 16GB DDR4 (2x8GB) 3200 MHz
                Armazenamento: SSD 8TB + HDD 1TB
                Placa de v칤deo: NVIDIA GeForce RTX 5090
                Sistema Operacional: Windows 20 Pro 128-bit
                
                Hist칩rico de manuten칞칚o:
                - 13/03/2025: Atualiza칞칚o de BIOS
                - 14/03/2025: Parafuso Mancer游땯 -->
            </div>
        </div>
    </div>
</div>

<footer>
    <div class="container">
        <p>&copy; 2025 Sistema de Invent치rio de Equipamentos Senac</p>
    </div>
</footer>

<script>
    // Banco de dados dos transformers/computadores
    const computersDatabase = {
        "221001": {
            title: "Windows 10 Pro",
            status: "active",
            name: "W-INF12-01",
            hostname: "CJ_W_01",
            model: "Windows 10 Pro",
            owner: "Diogo Vicente",
            ip: "DHCP",
            mac: "34:64:A9:00:58:10",
            details: `Processador: AMD A10 PRO-7800B R7, 12 Compute Cores 4C +8G 3.50 GHz
Mem칩ria RAM: 8GB (utiliz치vel: 6,98 GB)
Armazenamento: HD 500 GB
Placa de v칤deo: GPU Integrada (8 n칰cleos)
Sistema Operacional: Windows 10 Pro 64-bit

Hist칩rico de manuten칞칚o:
- 13/03/2025: Instala칞칚o de sistema operacional (Windows 10)`
        },
        "221002": {
            title: "Windows 10 Pro",
            status: "active",
            name: "W-INF12-02",
            hostname: "CJ_W_02",
            model: "Windows 10 Pro",
            owner: "Diogo Vicente",
            ip: "DHCP",
            mac: "4A:51:B7:8B:C6:17",
            details: `Processador: AMD A10 PRO-7800B R7, 12 Compute Cores 4C +8G 3.50 GHz
Mem칩ria RAM: 8GB (utiliz치vel: 6,98 GB)
Armazenamento: HD 500 GB
Placa de v칤deo: GPU Integrada (8 n칰cleos)
Sistema Operacional: Windows 10 Pro 64-bit

Hist칩rico de manuten칞칚o:
- 13/03/2025: Instala칞칚o de sistema operacional (Windows 10)`
        },
        "221003": {
            title: "Windows 10 Pro",
            status: "active",
            name: "W-INF12-03",
            hostname: "CJ_W_03",
            model: "Windows 10 Pro",
            owner: "Diogo Vicente",
            ip: "DHCP",
            mac: "34:64:A9:00:48:E8",
            details: `Processador: AMD A10 PRO-7800B R7, 12 Compute Cores 4C +8G 3.50 GHz
Mem칩ria RAM: 16GB (utiliz치vel: 15,0GB)
Armazenamento: HD 500 GB
Placa de v칤deo: GPU Integrada (8 n칰cleos)
Sistema Operacional: Windows 10 Pro 64-bit

Hist칩rico de manuten칞칚o:
- 13/03/2025: Instala칞칚o de sistema operacional (Windows 10)`
        },
        "221004": { 
            title: "Ubuntu 22.04 LTS",
            status: "active",
            name: "L-INF12-01",
            hostname: "CJ_L_01",
            model: "Apple Mac Mini M1 2020",
            owner: "Cleiton Hirsch",
            ip: "DHCP",
            mac: "48:51:B7:8B:C7:CA",
            details: `Processador: AMD A10 PRO-7800B R7, 12 Compute Cores 4C +8G 3.50 GHz
Mem칩ria RAM: 8GB
Armazenamento: HD 500 GB
Placa de v칤deo: GPU Integrada (8 n칰cleos)
Sistema Operacional: Ubuntu 22.04 LTS

Hist칩rico de manuten칞칚o:
- 13/03/2025: Instala칞칚o de sistema operacional (Ubunto Desktop)`
        },
        "221005": {
            title: "Ubuntu 22.04 LTS",
            status: "inactive",
            name: "L-INF12-02",
            hostname: "CJ_L_02",
            model: "Asus ProArt PA90",
            owner: "Cleiton Hirsch",
            ip: "DHCP",
            mac: "34:64:A9:00:48:3D",
            details: `Processador: AMD A10 PRO-7800B R7, 12 Compute Cores 4C +8G 3.50 GHz
Mem칩ria RAM: 8GB
Armazenamento: HD 500 GB
Placa de v칤deo: GPU Integrada (8 n칰cleos)
Sistema Operacional: Ubuntu 22.04 LTS

Hist칩rico de manuten칞칚o:
- 13/03/2025: Instala칞칚o de sistema operacional (Ubunto Desktop)`
        },


        // cameras (EM DIANTE DAQUI N츽O EST츼 CORRETO AS INFORMA칂칏ES)
        "221006": {
            title: "C칙mera HAIZ IP POE",
            status: "active",
            name: "CAM-INF12-01",
            hostname: "Nulo",
            model: "HZ-T28B2MP",
            owner: "Vitor Kunh, Diogo Vicente e Cleiton Hirsch",
            ip: "192.168.5.10",
            mac: "B4:8A:0A:55:D1:F2",
            details: `Resolu칞칚o: 2MP
Taxa de quadros: 30fps Full HD
츽ngulo de vis칚o: Fixa de 2,8 mm com campo de vis칚o de 74,7춿 (horizontal), 41춿 (vertical) e 86,6춿 (diagonal)
Vis칚o noturna: 30 metros
Conex칚o: PoE (Power over Ethernet)
Prote칞칚o: IP67 (resistente a 치gua e poeira)

Hist칩rico de manuten칞칚o:
- 25/03/2025: Instala칞칚o e configura칞칚o inicial
- 25/03/2025: Reposicionamento para melhor 칙ngulo de vis칚o`
        },
        "221007": {
            title: "C칙mera HAIZ IP POE",
            status: "active",
            name: "CAM-INF12-02",
            hostname: "Nulo",
            model: "HZ-T28B2MP",
            owner: "Vitor Kunh, Diogo Vicente e Cleiton Hirsch",
            ip: "192.168.6.10",
            mac: "54:E6:3B:D2:11:A8",
            details: `Resolu칞칚o: 2MP
Taxa de quadros: 30fps Full HD
츽ngulo de vis칚o: Fixa de 2,8 mm com campo de vis칚o de 74,7춿 (horizontal), 41춿 (vertical) e 86,6춿 (diagonal)
Vis칚o noturna: 30 metros
Conex칚o: PoE (Power over Ethernet)
Prote칞칚o: IP67 (resistente a 치gua e poeira)

Hist칩rico de manuten칞칚o:
- 25/03/2025: Instala칞칚o e configura칞칚o inicial
- 25/03/2025: Reposicionamento para melhor 칙ngulo de vis칚o`
        },
        "221008": {
            title: "NVR 8 Canais",
            status: "active",
            name: "NVR-INF12-01",
            hostname: "Nulo",
            model: "HZ-NVR8CH",
            owner: "Vitor Kunh",
            ip: "192.168.0.20",
            mac: "34:23:87:9C:D5:E1",
            details: `Canais: 8 canais IP
Resolu칞칚o de grava칞칚o: Full HD (1920*1080)
Armazenamento: 6 TB
Compress칚o: H.265+/H.264
Conex칫es: 8 portas PoE, 1 HDMI, 1 VGA, 2 USB, 1 RJ-45 Gigabit

Hist칩rico de manuten칞칚o:
- 15/03/2025: Instala칞칚o inicial e configura칞칚o`
        },
        "221009": {
            title: "Switch 24 Portas",
            status: "active",
            name: "SWT-INF12-01",
            hostname: "SWT-01",
            model: "TL-SL5428E",
            owner: "Vitor Kunh",
            ip: "Nulo",
            mac: "8K",
            details: `Portas: 24x
Portas de uplink: 4x SFP Gigabit
Capacidade de switching: 56 Gbps
PoE: 195W total dispon칤vel
Gerenciamento: RMON, CLI, SNMP
Layer: L2+ gerenci치vel

Hist칩rico de manuten칞칚o:
- 12/03/2025: Instala칞칚o e configura칞칚o inicial`
        },
        "221010": {
            title: "Switch 24 Portas",
            status: "active",
            name: "SWT-INF12-02",
            hostname: "SWT-01",
            model: "TL-SL5428E",
            owner: "Vitor Kunh",
            ip: "Nulo",
            mac: "8K",
            details: `Portas: 24x
Portas de uplink: 4x SFP Gigabit
Capacidade de switching: 56 Gbps
PoE: 195W total dispon칤vel
Gerenciamento: RMON, CLI, SNMP
Layer: L2+ gerenci치vel

Hist칩rico de manuten칞칚o:
- 12/03/2025: Instala칞칚o e configura칞칚o inicial`
        },
        "221011": {
            title: "Patch Panel Cat5e",
            status: "active",
            name: "PP-INF12-01",
            hostname: "Nulo",
            model: "Furukawa t568a/b",
            owner: "Pablo Renan",
            ip: "Nulo",
            mac: "Nulo",
            details: `Tipo: Cat6 UTP S칩lido
Portas: 24 portas RJ45, RJ11
Cor: Preto
IDC: 45춿

Hist칩rico de manuten칞칚o:
- 10/03/2025: Instala칞칚o inicial
- 11/03/2025: Organiza칞칚o e identifica칞칚o dos cabos`
        },
        "221012": {
            title: "Patch Panel Cat5e",
            status: "active",
            name: "PP-INF12-02",
            hostname: "Nulo",
            model: "Furukawa t568a/b",
            owner: "Pablo Renan",
            ip: "Nulo",
            mac: "Nulo",
            details: `Tipo: Cat6 UTP S칩lido
Portas: 24 portas RJ45, RJ11
Cor: Preto
IDC: 45춿

Hist칩rico de manuten칞칚o:
- 10/03/2025: Instala칞칚o inicial
- 11/03/2025: Organiza칞칚o e identifica칞칚o dos cabos`
            },
        "221013": {
            title: "Minitor LG",
            status: "active",
            name: "MON-INF12-01",
            hostname: "Nulo",
            model: "LG 22MP410-B",
            owner: "Diogo Vicente",
            ip: "Nulo",
            mac: "Nulo",
            details: `Tamanho: 22 polegadas
Taxa de atualiza칞칚o: 75 HZ
Cor: Preto
Resolu칞ao: Full HD
Painel: VA`
            },
        "221014": {
            title: "Minitor LG",
            status: "active",
            name: "MON-INF12-02",
            hostname: "Nulo",
            model: "LG 22MP410-B",
            owner: "Diogo Vicente",
            ip: "Nulo",
            mac: "Nulo",
            details: `Tamanho: 22 polegadas
Taxa de atualiza칞칚o: 75 HZ
Cor: Preto
Resolu칞ao: Full HD
Painel: VA`
            },
        "221015": {
            title: "Monitor HP",
            status: "active",
            name: "MON-INF12-03",
            hostname: "Nulo",
            model: "HP L200hx",
            owner: "Diogo Vicente",
            ip: "Nulo",
            mac: "Nulo",
            details: `Tamanho: 20 polegadas
Taxa de atualiza칞칚o: 60 HZ
Cor: Preto
Resolu칞ao: HD
Painel: VA`
            },
        "221016": {
            title: "Monitor HP",
            status: "active",
            name: "MON-INF12-04",
            hostname: "Nulo",
            model: "HP V206hz",
            owner: "Cleiton Hirsch",
            ip: "Nulo",
            mac: "Nulo",
            details: `Tamanho: 20 polegadas
Taxa de atualiza칞칚o: 60 HZ
Cor: Preto
Resolu칞ao: HD
Painel: VA`
            },
        "221017": {
            title: "Monitor HP",
            status: "active",
            name: "MON-INF12-05",
            hostname: "Nulo",
            model: "HP L200hx",
            owner: "Diogo Vicente",
            ip: "Nulo",
            mac: "Nulo",
            details: `Tamanho: 20 polegadas
Taxa de atualiza칞칚o: 60 HZ
Cor: Preto
Resolu칞ao: HD
Painel: VA`
            }
    };

    // parametros URL
    function getUrlParameter(name) {
        name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
        const regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
        const results = regex.exec(location.search);
        return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
    }

    // function para buscar computador pelo codigo de barras
    function fetchComputerData(code) {
        return new Promise((resolve, reject) => {
            // Delay
            setTimeout(() => {
                // Deixar apenas numeros para n칚o aparecer caracteres diferentes no c칩digo
                const normalizedCode = code.replace(/[-\s]/g, '').toUpperCase();
                
                // Buscar no banco de dados
                for (const [key, computer] of Object.entries(computersDatabase)) {
                    if (key.replace(/[-\s]/g, '').toUpperCase() === normalizedCode) {
                        resolve(computer);
                        return;
                    }
                }
                
                reject('Computador n칚o encontrado');
            }, 500);
        });
    }

    // Fun칞칚o para mostrar os dados do computador
    function displayComputerInfo(computer) {
        document.getElementById('computer-title').textContent = computer.title;
        document.getElementById('computer-name').textContent = computer.name;
        document.getElementById('computer-hostname').textContent = computer.hostname;
        document.getElementById('computer-model').textContent = computer.model;
        document.getElementById('computer-owner').textContent = computer.owner;
        document.getElementById('computer-ip').textContent = computer.ip;
        document.getElementById('computer-mac').textContent = computer.mac;
        document.getElementById('computer-details').textContent = computer.details;
        
        // Configurar o status
        const statusElement = document.getElementById('computer-status');
        statusElement.className = 'status-badge';
        
        switch (computer.status) {
            case 'active':
                statusElement.classList.add('status-active');
                statusElement.textContent = 'Ativo';
                break;
            case 'maintenance':
                statusElement.classList.add('status-maintenance');
                statusElement.textContent = 'Em Manuten칞칚o';
                break;
            case 'inactive':
                statusElement.classList.add('status-inactive');
                statusElement.textContent = 'Inativo';
                break;
            default:
                statusElement.classList.add('status-active');
                statusElement.textContent = 'Ativo';
        }
        
        // Exibir a se칞칚o de informa칞칫es
        document.getElementById('computer-info').style.display = 'block';
    }

// Fun칞칚o para lidar com a busca
function handleSearch(code) {
    if (!code || code.trim() === '') {
        document.getElementById('error').textContent = 'Por favor, digite um c칩digo v치lido.';
        document.getElementById('error').style.display = 'block';
        return;
    }
    
    // Esconder elementos anteriores
    document.getElementById('error').style.display = 'none';
    document.getElementById('computer-info').style.display = 'none';
    document.getElementById('loading').style.display = 'block';
    
    // Buscar dados do computador
    fetchComputerData(code)
        .then(computer => {
            document.getElementById('loading').style.display = 'none';
            document.getElementById('error').style.display = 'none'; // Garantir que erro est치 oculto
            displayComputerInfo(computer);
        })
        .catch(error => {
            document.getElementById('loading').style.display = 'none';
            document.getElementById('error').textContent = 'N칚o foi poss칤vel encontrar um computador com este c칩digo. Verifique e tente novamente.';
            document.getElementById('error').style.display = 'block';
        });
}
function createEventSearchInput(){
    let searchInput = document.getElementById("search-input");
    let timeoutId = null; // Para controlar o timeout da pesquisa
    
    searchInput.addEventListener("input", (event) => {
        let contentLength = searchInput.value.length;
        
        // Limpar o timeout anterior para evitar m칰ltiplas chamadas
        if (timeoutId) {
            clearTimeout(timeoutId);
        }
        
        // Esconder mensagem de erro quando o usu치rio digita
        document.getElementById('error').style.display = 'none';
        
        if(contentLength > 6){
            // Armazenar o valor atual
            let currentValue = searchInput.value;
            
            // Primeiro timeout para remover os 6 primeiros caracteres
            setTimeout(() => {
                // Remover os 6 primeiros caracteres e manter o resto
                searchInput.value = currentValue.substring(6);
                
                // Armazenar o novo valor para pesquisa
                let searchValue = searchInput.value;
                
                // Segundo timeout para executar a pesquisa ap칩s 3 segundos
                timeoutId = setTimeout(() => {
                    handleSearch(searchValue);
                }, 500);
                
            }, 10);
        }
    });
}

function createEventStatusBadge() {
    let statusBadge = document.getElementById("computer-status");

    statusBadge.addEventListener("click", () => {
        let currentCode = document.getElementById("search-input").value;
        // Verificar se o c칩digo atual existe no banco de dados
        if (computersDatabase[currentCode]) {
            // Definir o pr칩ximo estado em um ciclo
            const statusCycle = {
                'active': 'inactive',
                'inactive': 'maintenance',
                'maintenance': 'active'
            };

            // Obter o pr칩ximo status
            const nextStatus = statusCycle[computersDatabase[currentCode].status];
            
            // Atualizar o status no banco de dados
            computersDatabase[currentCode].status = nextStatus;

            // Atualizar o texto e o estilo do bot칚o baseado no novo status
            switch (nextStatus) {
                case 'active':
                    statusBadge.textContent = 'Ativo';
                    statusBadge.classList.remove('status-inactive', 'status-maintenance');
                    statusBadge.classList.add('status-active');
                    break;
                case 'inactive':
                    statusBadge.textContent = 'Inativo';
                    statusBadge.classList.remove('status-active', 'status-maintenance');
                    statusBadge.classList.add('status-inactive');
                    break;
                case 'maintenance':
                    statusBadge.textContent = 'Em Manuten칞칚o';
                    statusBadge.classList.remove('status-active', 'status-inactive');
                    statusBadge.classList.add('status-maintenance');
                    break;
            }

            // Log da mudan칞a de status
            console.log(`Status do equipamento ${currentCode} alterado para: ${nextStatus}`);
        } else {
            console.error('C칩digo do equipamento n칚o encontrado');
        }
    });
}

// Verificar se h치 um c칩digo na URL quando a p치gina carrega
document.addEventListener('DOMContentLoaded', function() {
    const code = getUrlParameter('codigo');
    
    createEventSearchInput();
    createEventStatusBadge();
    
    // Esconder mensagem de erro no carregamento
    document.getElementById('error').style.display = 'none';
    
    // Se houver um c칩digo na URL, esperar 3 segundos e realizar a busca
    if (code) {
        setTimeout(() => {
            document.getElementById('search-input').value = code;
            handleSearch(code);
        }, 500);
    }
    
    // Configurar o evento de clique do bot칚o de busca
    document.getElementById('search-button').addEventListener('click', function() {
        const code = document.getElementById('search-input').value;
        // Esconder mensagem de erro quando clicar no bot칚o
        document.getElementById('error').style.display = 'none';
        setTimeout(() => {
            handleSearch(code);
        }, 500);
    });
    
    // Configurar o evento de pressionar Enter no campo de busca
    document.getElementById('search-input').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
            const code = document.getElementById('search-input').value;
            // Esconder mensagem de erro quando pressionar Enter
            document.getElementById('error').style.display = 'none';
            setTimeout(() => {
                handleSearch(code);
            }, 500);
            e.preventDefault(); // Prevenir envio de formul치rio
        }
    });
    
});

</script>
</body>
</html>